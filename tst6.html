<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"/>
  <style>
    /* [Início] -- Estilos locais para não conflitar com o resto da página */
    #hotelbeds-organizer-container {
      font-family: Arial, sans-serif;
      margin: 20px;
      color: #333;
    }
    #hotelbeds-organizer-container h2 {
      margin-top: 30px;
      font-size: 1.2rem;
      color: #0066c0;
    }
    #hotelbeds-organizer-container table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 30px;
    }
    #hotelbeds-organizer-container th,
    #hotelbeds-organizer-container td {
      border: 1px solid #ccc;
      padding: 8px;
      font-size: 0.9rem;
    }
    #hotelbeds-organizer-container th {
      background: #f5f5f5;
    }
    .room-name {
      font-weight: bold;
      color: #444;
    }
    .rate-info {
      margin-left: 20px;
      font-size: 0.85rem;
    }
    .rate-info strong {
      color: #555;
    }
    /* [Fim] -- Estilos locais */
  </style>
</head>
<body>

<div id="hotelbeds-organizer-container">
  <h1>Organizador de Resultado Hotelbeds</h1>
  
  <div id="hotelsData">
    <!-- Aqui o JS vai inserir o HTML estruturado -->
  </div>
</div>

<script>
/* 
   Substitua o objeto abaixo (responseData) pelo JSON EXATO 
   que você recebeu da API (pode colar a resposta integral).
*/
const responseData = {
  "auditData": {
    "processTime": "99",
    "timestamp": "2025-02-25 21:42:47.395",
    /* ... resto do auditData ... */
  },
  "hotels": {
    "hotels": [
      /* 
         === AQUI VAI sua lista de hoteis ===
         "code", "name", "destinationCode", "rooms", "rates" etc. 
      */
      
      /* EXEMPLO (trecho encurtado) */
      {
        "code": 13204,
        "name": "Eurostars Winter Haven",
        "categoryCode": "4EST",
        "zoneName": "Miami Beach",
        "rooms": [
          {
            "code": "ROO.PR",
            "name": "Habitación PROMO",
            "rates": [
              {
                "rateKey": "20250321|20250322|W|235|13204|ROO.PR|...",
                "rateClass": "NOR",
                "net": "104.02",
                "boardName": "SOLO HABITACIÓN",
                "paymentType": "AT_WEB",
                "cancellationPolicies": [
                  { "amount": "104.02", "from": "2025-03-13T22:59:00-04:00" }
                ]
              },
              {
                "rateKey": "20250321|20250322|W|235|13204|ROO.PR|...",
                "rateClass": "NOR",
                "net": "156.03",
                "boardName": "ALOJAMIENTO Y DESAYUNO",
                "paymentType": "AT_WEB"
              }
              /* ... */
            ]
          }
          /* ... */
        ],
        "minRate": "104.02",
        "maxRate": "293.34",
        "currency": "EUR"
      },
      {
        "code": 89413,
        "name": "Penguin Hotel",
        /* ... etc ... */
      }
      /* ... e assim por diante ... */
    ],
    "checkIn": "2025-03-21",
    "total": 2,
    "checkOut": "2025-03-22"
  }
};

/* ---------- LÓGICA PARA ORGANIZAR E EXIBIR ---------- */
function renderHotelsData(data) {
  const container = document.getElementById('hotelsData');
  // Limpa antes de começar
  container.innerHTML = '';

  // Verifica se veio no formato esperado
  if (!data || !data.hotels || !data.hotels.hotels) {
    container.innerHTML = '<p>Dados de hotéis não encontrados!</p>';
    return;
  }

  const hotelsArray = data.hotels.hotels; // array de hotéis
  hotelsArray.forEach((hotel) => {
    const { code, name, categoryCode, zoneName, minRate, maxRate, currency, rooms } = hotel;

    // Cria um título para cada hotel
    const hotelTitle = document.createElement('h2');
    hotelTitle.textContent = `Hotel: ${name} (code: ${code})`;
    container.appendChild(hotelTitle);

    // Informações resumidas do hotel
    const summary = document.createElement('p');
    summary.innerHTML = `
      Categoria: <strong>${categoryCode || 'N/A'}</strong><br/>
      Local: <strong>${zoneName || 'N/A'}</strong><br/>
      Faixa de Preços: <strong>${minRate || '?'} - ${maxRate || '?'} ${currency || ''}</strong>
    `;
    container.appendChild(summary);

    // Se tiver rooms, exibir em tabela
    if (Array.isArray(rooms) && rooms.length > 0) {
      const table = document.createElement('table');

      // Cabeçalho da tabela
      const thead = document.createElement('thead');
      thead.innerHTML = `
        <tr>
          <th>Código do Quarto</th>
          <th>Nome do Quarto</th>
          <th>Tarifas</th>
        </tr>
      `;
      table.appendChild(thead);

      const tbody = document.createElement('tbody');

      rooms.forEach((room) => {
        const { code: roomCode, name: roomName, rates } = room;
        const tr = document.createElement('tr');

        // Coluna 1: Código do quarto
        const tdCode = document.createElement('td');
        tdCode.textContent = roomCode || '';
        tr.appendChild(tdCode);

        // Coluna 2: Nome do quarto
        const tdName = document.createElement('td');
        tdName.innerHTML = `<span class="room-name">${roomName || ''}</span>`;
        tr.appendChild(tdName);

        // Coluna 3: Tarifas (podem ser várias)
        const tdRates = document.createElement('td');
        if (Array.isArray(rates) && rates.length > 0) {
          rates.forEach((rate) => {
            const divRate = document.createElement('div');
            divRate.className = 'rate-info';
            divRate.innerHTML = `
              <strong>rateKey:</strong> ${rate.rateKey}<br/>
              <strong>Classe:</strong> ${rate.rateClass}<br/>
              <strong>Valor líquido (net):</strong> ${rate.net} ${currency || ''}<br/>
              <strong>Plano:</strong> ${rate.boardName || ''}<br/>
              <strong>Pagamento:</strong> ${rate.paymentType || ''}<br/>
            `;

            // Se tiver cancel policies, exibir
            if (rate.cancellationPolicies && rate.cancellationPolicies.length > 0) {
              divRate.innerHTML += `<strong>Cancelamento:</strong><br/>`;
              rate.cancellationPolicies.forEach((pol) => {
                divRate.innerHTML += `&emsp;- Multa: ${pol.amount} desde ${pol.from}<br/>`;
              });
            }

            divRate.innerHTML += '<hr style="margin: 8px 0;" />';
            tdRates.appendChild(divRate);
          });
        } else {
          tdRates.textContent = 'Sem tarifas';
        }
        tr.appendChild(tdRates);

        tbody.appendChild(tr);
      });

      table.appendChild(tbody);
      container.appendChild(table);
    } else {
      // Se não tiver rooms
      const noRooms = document.createElement('p');
      noRooms.textContent = 'Não há quartos ou tarifas disponíveis.';
      container.appendChild(noRooms);
    }
  });
}

// Chama a função para organizar/exibir
renderHotelsData(responseData);
</script>

</body>
</html>
